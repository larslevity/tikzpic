\input{../../TikZ_header.tex}


%% Arbeitszeit:
% 30.11.15  1100- 1430
% 04.12.15  1510 - 


\usepackage{scalefnt}

\begin{document}
\begin{tikzpicture}

\def\xabs{6}
\def\zh{.6}
\def\zhh{.3}
\def\xsmall{2}

\foreach \y in {1,2,...,39}{
	\foreach \x in {1,2,3,4}{
		\pgfmathsetmacro{\xx}{(\x-1)*\xabs}
		
		
		\ifthenelse{\y>8}% If y >8
			{\ifthenelse{\y>22}% If y >22
				{\ifthenelse{\y>37}% If y >37
					{\pgfmathsetmacro{\yy}{((\y-1+3)*\zh)}} % Addiere + 3*\zh auf die y-Achse
					{\pgfmathsetmacro{\yy}{((\y-1+2)*\zh)}}% Addiere +2*\zh auf y- Achse
				}
				{\pgfmathsetmacro{\yy}{((\y-1+1)*\zh)}}% Addiere +\zh auf y- Achse
			}			
			{\pgfmathsetmacro{\yy}{(\y-1)*\zh}}% Else: Addiere nichts.
			
		
		\ifthenelse{\x=1}
			{\ifthenelse{\y<39}{
				{\path (\xx,-\yy)coordinate(\y\x)--++(0,-\zhh)node[left]{\y};}{\path (\xx,-\yy)coordinate(\y\x);}}}
				{\path (\xx,-\yy)coordinate(\y\x);
			}	
	}
}



\fill[gray!1] (11)rectangle(94);
\path (11)--(94)node[midway,scale=7,text opacity=0.2]{Planungsphase};
\fill[gray!5] (91)rectangle(234);
\path (91)--(234)node[midway,scale=7,text opacity=0.2]{Entwurfsphase};
\fill[gray!10] (231)rectangle(394);
\path (231)--(394)node[midway,scale=7,text opacity=0.2,align = center]{Ausarbeitungs- \\ phase};

%% Kategorien:
\path (11)--(12)node[midway,above]{\textbf{Bearbeiten}};
\path (12)--(13)node[midway,above]{\textbf{Steuern}};
\path (13)--(14)node[midway,above]{\textbf{Entscheiden}};


%% Eintraege

\draw[very thick] (12)rectangle(43);
\path (12)--++(0,-\zhh)node[right]{Ideen sammeln (P)};
\path (22)--++(0,-\zhh)node[right]{Ideen dokumentieren (P)};
\path (32)--++(0,-\zhh)node[right]{Ideen vorab sichten (E,P)};


\draw [very thick] (41)rectangle(52);
\draw[-latex] (42)++(\xsmall,0)|-++(-\xsmall,-\zhh);
\path (41)--++(0,-\zhh)node[right]{Ideen konkretisieren};

\draw [very thick] (52)rectangle(63);
\draw[-latex] (52)++(-\xsmall,0)|-++(\xsmall,-\zhh);
\path (52)--++(0,-\zhh)node[right]{Bewertungsbögen erstellen (P)};

\draw [very thick] (61)rectangle(72);
\draw[-latex] (62)++(\xsmall,0)|-++(-\xsmall,-\zhh);
\path (61)--++(0,-\zhh)node[right]{Ideen bewerten};

\draw [very thick] (72)rectangle(83);
\draw[-latex] (72)++(-\xsmall,0)|-++(\xsmall,-\zhh);
\path (72)--++(0,-\zhh)node[right]{Bewertungsbögen auswerten (P)};

\draw [very thick] (83)rectangle(94);
\draw[-latex] (83)++(-\xsmall,0)|-++(\xsmall,-\zhh);
\path (83)--++(0,-\zhh- \zhh)node[right,align = left]{Projektentscheidung  (Produkte: \\ V,E,F,P / Verfahren: F,E,P,V)};

\draw[dashed, -latex] (83)++(\xsmall,0)|-++(-\xsmall,\zh+\zh+\zh+\zhh)node[sloped,pos=.25,above]{ändern};

\draw[dashed, -latex] (84)++(-\xsmall,0)--++(0,+\zh+\zh+\zh+\zh+\zhh)node[sloped,pos=.5,above]{unbrauchbar}coordinate(help);
\path (help)node[above,draw]{Archiv};




%% Entwurfsphase

\draw[very thick] (92)rectangle(133);

%% Eintraege
\path (92)--++(0,-\zhh)node[right]{Projekt starten (P)};
\path (102)--++(0,-\zhh)node[right]{Zeitplan erstellen (L)};
\path (112)--++(0,-\zhh)node[right]{Kosten abschätzen (L,E)};
\path (122)--++(0,-\zhh)node[right]{Überwachung sichern (P)};

\draw [-latex] (93)++(\xsmall,0)|-++(-\xsmall,-\zhh)node[pos=.55,below]{sinnvoll / nötig};


\draw[very thick] (131)rectangle(192);
\path (131)--++(0,-\zhh)node[right]{Funktionelle Optimierung, insb.};
\path (141)--++(0,-\zhh)node[right]{- Markteinführung};
\path (151)--++(0,-\zhh)node[right]{- Entwicklungskonstruktion};
\path (161)--++(0,-\zhh)node[right]{- Kurz-, Vergleichskalkulationen};
\path (171)--++(0,-\zhh)node[right]{- Muster fertigen,};
\path (181)--++(0,-\zhh)node[right]{- Versuche};
\draw [-latex] (192)++(-\xsmall,0)|-++(\xsmall,-\zhh);


\draw[very thick] (192)rectangle(223);
\path (192)--++(0,-\zhh)node[right]{Ergebnisse auswerten (L)};
\path (202)--++(0,-\zhh)node[right]{Bericht erstellen (L)};
\path (212)--++(0,-\zhh)node[right]{Konferenz einberufen (P)};

\draw [-latex] (223)++(-\xsmall,0)|-++(\xsmall,-\zhh);

\draw[very thick] (223)rectangle(234);
\path (223)--++(0,-\zhh- \zhh)node[right, align = left]{Entwicklungsentscheidung \\ (E,F,M,P,Q,V)};
\pgfmathsetmacro{\help}{10*\zh}
\draw[dashed, -latex] (223)++(\xsmall,0)|-++(-\xsmall,\help+\zhh)node[sloped,pos=.25,above]{ändern};

\draw[dashed, -latex] (224)++(-\xsmall,0)--++(0,+\zh+\zh+\zh+\zh+\zhh)node[sloped,pos=.5,above]{zwecklos}coordinate(help);
\path (help)node[above,draw]{Archiv};



%% Ausarbeitungsphase


\draw[very thick] (232)rectangle(273);
\path (232)--++(0,-\zhh)node[right]{Zeitplan erstellen (L)};
\path (242)--++(0,-\zhh)node[right]{Kostenplan erstellen (L)};
\path (252)--++(0,-\zhh)node[right]{Bearbeitung veranlassen (L)};
\path (262)--++(0,-\zhh)node[right]{Überwachung sichern (P)};
\draw[-latex] (233)++(\xsmall,0)|-++(-\xsmall,-\zhh)node[pos=.55,below]{erfolgsversprechend};



\draw[very thick] (271)rectangle(322);
\path (271)--++(0,-\zhh)node[right]{Gesamte Produktoptimierung, z.B.:};
\path (281)--++(0,-\zhh)node[right]{- Detailkonstruktion};
\path (291)--++(0,-\zhh)node[right]{- Vor-, Muster-, Nullserie};
\path (301)--++(0,-\zhh)node[right]{- Vorkalkulation};
\path (311)--++(0,-\zhh)node[right]{- Markt-, Kundentests};
\draw [-latex] (272)++(\xsmall,0)|-++(-\xsmall,-\zhh);
\draw [-latex] (322)++(-\xsmall,0)|-++(\xsmall,-\zhh);


\draw[very thick] (322)rectangle(373);
\path (322)--++(0,-\zhh)node[right]{Zeichnungsänderungen veranlassen (L)};
\path (332)--++(0,-\zhh)node[right]{Ergebnisse auswerten (L)};
\path (342)--++(0,-\zhh)node[right]{Bericht erstellen (L)};
\path (352)--++(0,-\zhh)node[right]{Freigabeformular starten (L)};
\path (362)--++(0,-\zhh)node[right]{Konferenz einberufen (P)};



\draw [-latex] (373)++(-\xsmall,0)|-++(\xsmall,-\zhh);


\draw[very thick] (373)rectangle(384);
\path (373)--++(0,-\zhh- \zhh)node[right, align = left]{Fertigungsentscheidung \\ (E,F,G,M,P,Q,V)};
\pgfmathsetmacro{\help}{10*\zh}
\draw[dashed, -latex] (373)++(\xsmall,0)|-++(-\xsmall,\help+\zhh)node[sloped,pos=.25,above]{ändern};

\draw[dashed, -latex] (374)++(-\xsmall,0)--++(0,+\zh+\zh+\zh+\zh+\zhh)node[sloped,pos=.5,above]{aussichtslos}coordinate(help);
\path (help)node[above,draw]{Archiv};

\draw[-latex] (383)++(\xsmall,0)|-++(-\xsmall,-\zhh);
\draw[-latex] (383)++(\xsmall,0)|-++(-\xsmall,-\zhh-\zh-\zh)node[pos=.3,right]{Freigabe zu Fertigung};


%%
\draw[very thick] (382)rectangle(393);
\path (382)++(0,-\zhh)node[right]{Projekt dokumentieren (L)};

\path (392)++(0,-\zh)node[right]{Fertigungsvorbereitung};
\path (392)++(-\xabs,-\zh-\zhh)node[right,align = left]{Serienfertigung \\ Nachkalkulation usw.};



\end{tikzpicture}
\end{document}